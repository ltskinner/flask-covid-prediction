# flask-covid-prediction

All credit: [https://github.com/jingyi-xie/covid-prediction](https://github.com/jingyi-xie/covid-prediction)

## Env

`conda activate py39`

## GCP

Oh also, I just used the cloud terminal for all the gcloud init commands. Will be trickier if on private repo in future, but that is a compartmentalized issue

App Engine with Cloud Build: [https://cloud.google.com/source-repositories/docs/automate-app-engine-deployments-cloud-build](https://cloud.google.com/source-repositories/docs/automate-app-engine-deployments-cloud-build)

app.yml config: [https://cloud.google.com/appengine/docs/flexible/python/create-app](https://cloud.google.com/appengine/docs/flexible/python/create-app)

### `description: You do not have permission to act as this service account.`

The resp with all the pictures is good [https://stackoverflow.com/questions/64236468/cloud-build-fails-to-deploy-to-google-app-engine-you-do-not-have-permission-to](https://stackoverflow.com/questions/64236468/cloud-build-fails-to-deploy-to-google-app-engine-you-do-not-have-permission-to)

## Azure

- Launch `Azure Shell`
- Clone repo
- Create env and source
- Prepare env
  - `make setup`
  - `make source`
  - `make install`
- Create app service for initial deployment
  - `az webapp up -n APP_SERVICE_NAME`
  - note, apps must be globally unique, leave blank for autogenerated:
    - config python verison: [https://learn.microsoft.com/en-us/azure/app-service/configure-language-python](https://learn.microsoft.com/en-us/azure/app-service/configure-language-python)
    - `az webapp up`
    - created: `icy-ground-1f4fc1b4733e40198b434dcfafeb4846`
    - at: [https://icy-ground-1f4fc1b4733e40198b434dcfafeb4846.azurewebsites.net/](https://icy-ground-1f4fc1b4733e40198b434dcfafeb4846.azurewebsites.net/)
- Update make_predict_azure.sh to include new url
- Create an Azure DevOps Project
  - [https://learn.microsoft.com/en-us/azure/devops/pipelines/ecosystems/python-webapp?view=azure-devops](https://learn.microsoft.com/en-us/azure/devops/pipelines/ecosystems/python-webapp?view=azure-devops)

### Configuration -> General Settings Tab

Startup Command: `gunicorn --bind 0.0.0.0:8000 application:application`

(actually - heavily tested to get here lol)
